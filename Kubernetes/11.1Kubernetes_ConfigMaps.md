# **11.1 : ConfigMap ‚Äì Externalize Non-Sensitive Configuration**

https://drive.google.com/file/d/186ta4j4uZBZyg3jlWT100rieeXzVDV22/view?usp=sharing

### üéØ What It Is

A **ConfigMap** is a Kubernetes resource that stores **non-sensitive configuration data** (like app settings, feature flags, log levels) as key-value pairs ‚Äî **separate from your container image**.

> ‚úÖ Why? So you can change config without rebuilding your image.
> 

### üí° Real-World Analogy

> Think of a ConfigMap like a .env file or app.conf ‚Äî but managed by Kubernetes and injected into your Pods safely.
> 

---

### üß™ Example: Inject App Settings as Environment Variables

**Step 1: Create a ConfigMap**

```yaml
# app-config.yaml
apiVersion: v1
kind: ConfigMap
meta
  name: webapp-config
  namespace: dev
data:
  LOG_LEVEL: "info"
  FEATURE_NEW_UI: "true"
  API_TIMEOUT: "5000"

```

Apply it:

```bash
kubectl apply -f app-config.yaml

```

**Step 2: Use It in a Pod**

```yaml
# webapp-pod.yaml
apiVersion: v1
kind: Pod
meta
  name: webapp
  namespace: dev
spec:
  containers:
  - name: app
    image: nginx
    envFrom:
    - configMapRef:
        name: webapp-config  # ‚Üê Inject all keys as env vars

```

Apply and test:

```bash
kubectl apply -f webapp-pod.yaml
kubectl exec webapp -n dev -- printenv | grep LOG_LEVEL
# Output: LOG_LEVEL=info

```

‚úÖ **Result**: Your app reads config from environment ‚Äî no hardcoded values!

---

### ‚úÖ Summary YAML

```yaml
# Create ConfigMap
apiVersion: v1
kind: ConfigMap
meta
  name: my-config
data:
  KEY1: "value1"
  KEY2: "value2"

# Use in Pod
envFrom:
- configMapRef:
    name: my-config

```

---

### ‚ùì Common Questions

**Q: Can I update a ConfigMap and have Pods see the change?**

‚û°Ô∏è **If using `envFrom`**: ‚ùå No ‚Äî Pods must be **recreated**.

‚û°Ô∏è **If mounted as volume**: ‚úÖ Yes ‚Äî files auto-update in ~1 minute.

**Q: What‚Äôs the max size of a ConfigMap?**

‚û°Ô∏è **1 MiB** (same as etcd object limit).

**Q: Can I use ConfigMap across namespaces?**

‚û°Ô∏è ‚ùå No ‚Äî ConfigMaps are **namespaced**. Create one per namespace.

---

### üõ†Ô∏è Best Practices

1. ‚úÖ **Use for non-sensitive data only** (never passwords!)
2. ‚úÖ Prefer `envFrom` for many variables, `valueFrom` for one or two:
    
    ```yaml
    env:
    - name: TIMEOUT
      valueFrom:
        configMapKeyRef:
          name: my-config
          key: API_TIMEOUT
    
    ```
    
3. ‚úÖ For config **files** (like `nginx.conf`), **mount as volume** (next topic!)
4. ‚úÖ Store ConfigMap YAML in Git ‚Äî it‚Äôs safe!