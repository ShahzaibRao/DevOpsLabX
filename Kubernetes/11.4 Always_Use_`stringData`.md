# 11.4 : `stringData` vs `data` in Secrets â€“ Write Secrets in Plain Text

https://drive.google.com/file/d/1sU2A8o26AZGml3tADoaY0gnO_GresyXy/view?usp=sharing

### ğŸ¯ What It Is

Kubernetes Secrets support **two ways** to define sensitive values:

- **`data`**: Requires **base64-encoded strings** (hard to read/write)
- **`stringData`**: Accepts **plain-text strings** (Kubernetes auto-encodes them)

> âœ… Always prefer stringData â€” itâ€™s human-readable, less error-prone, and easier to manage.
> 

### ğŸ’¡ Real-World Analogy

> Writing a password:
> 
> - **`data`**: You manually encode it â†’ `cGFzc3dvcmQ=`
> - **`stringData`**: You write it normally â†’ `password` â†’ system handles encoding

---

### ğŸ§ª Example: Create a Secret with `stringData` (Recommended)

**Step 1: Define Secret with `stringData`**

```yaml
# api-secret.yaml
apiVersion: v1
kind: Secret
meta
  name: github-creds
  namespace: ci

  # Plain text â€” no base64!
  token: "ghp_AbC123xYz456"
  username: "dev-team-bot"

```

Apply it:

```bash
kubectl apply -f api-secret.yaml

```

**Step 2: Verify Kubernetes Encoded It**

```bash
kubectl get secret github-creds -n ci -o yaml

```

âœ… Youâ€™ll see:

```yaml

  token: Z2hwX0FiQzEyM3hZejQ1Ng==   # auto-encoded
  username: ZGV2LXRlYW0tYm90          # auto-encoded

```

**Step 3: Use in a Pod**

```yaml
spec:
  containers:
  - name: ci-runner
    image: alpine
    env:
    - name: GITHUB_TOKEN
      valueFrom:
        secretKeyRef:
          name: github-creds
          key: token

```

âœ… Works perfectly â€” and your YAML stays **readable**!

---

### ğŸ†š Compare: `data` (Old Way) vs `stringData` (New Way)

| Approach | YAML Snippet | Pros | Cons |
| --- | --- | --- | --- |
| **`data`** | `token: Z2hwX0FiQzEyM3hZejQ1Ng==` | Works everywhere | âŒ Hard to read/edit<br>âŒ Easy to break encoding |
| **`stringData`** | `token: "ghp_AbC123xYz456"` | âœ… Human-readable<br>âœ… Less error-prone | Only in **Secrets** (not ConfigMaps) |

> âš ï¸ Never do this:
> 
> 
> ```yaml
> 
>   token: ghp_AbC123xYz456   # âŒ Missing base64 = decode error!
> 
> ```
> 

---

### âœ… Summary YAML

```yaml
# âœ… DO THIS â€” use stringData
apiVersion: v1
kind: Secret
meta
  name: my-secret

  key1: "plain text value"
  key2: "another secret"

# âŒ AVOID THIS â€” manual base64
apiVersion: v1
kind: Secret
meta
  name: my-secret

  key1: cGxhaW4gdGV4dCB2YWx1ZQ==  # hard to maintain

```

---

### â“ Common Questions

**Q: Can I use both `data` and `stringData` in the same Secret?**

âœ… Yes! Theyâ€™re merged:

```yaml

  encoded_key: c2VjcmV0  # from data
stringData:
  plain_key: "secret"   # auto-encoded

```

**Q: Does `stringData` work in ConfigMaps?**

âŒ No! ConfigMaps only support plain `data` (no encoding needed).

**Q: What if I typo a `stringData` value?**

â¡ï¸ No problem â€” itâ€™s just text. With `data`, a bad base64 string breaks decoding.

**Q: Is `stringData` supported in all Kubernetes versions?**

âœ… Yes! Since **Kubernetes 1.4+**.

---

### ğŸ› ï¸ Best Practices

1. âœ… **Always use `stringData`** for Secrets â€” itâ€™s the modern, safe way.
2. âœ… **Never commit real secrets to Git** â€” even with `stringData`! Use:
    - CI/CD pipelines (`kubectl create secret --from-literal=...`)
    - External secret managers (Vault, AWS Secrets Manager)
    - **External Secrets Operator (ESO)** for production
3. âœ… Use **`.gitignore`** for local Secret files:
    
    ```
    *-secret.yaml
    
    ```
    
4. âœ… For CI/CD, generate Secrets at deploy time: