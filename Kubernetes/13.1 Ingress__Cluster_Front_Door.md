# 13.1 : What Is Ingress? (The Kubernetes Front Door)**

### üéØ What It Is

An **Ingress** is a Kubernetes resource that **manages external HTTP/S access** to services in your cluster ‚Äî typically via **hostnames, paths, and TLS**.

> ‚úÖ Without Ingress: You‚Äôd need NodePort or LoadBalancer for every service.
> 
> 
> üîí **With Ingress**: One entry point routes traffic to many services.
> 

### üí° Real-World Analogy

> Like a reception desk in an office building:
> 
> - Visitor says: ‚ÄúI‚Äôm here for **marketing**‚Äù ‚Üí sent to **floor 3**
> - Visitor says: ‚ÄúI‚Äôm here for **engineering**‚Äù ‚Üí sent to **floor 5**
> - The building has **one front door** (Ingress), but many internal offices (Services)

---

### üß™ Example: Expose Two Apps via One Ingress

**Assume you have:**

- A `web` Service (`app: web`)
- An `api` Service (`app: api`)

**Step 1: Create an Ingress Resource**

```yaml
# ingress.yaml
apiVersion: networking.k8s.io/v1
kind: Ingress
meta
  name: main-ingress
  namespace: default
spec:
  rules:
  - host: web.example.com
    http:
      paths:
      - path: /
        pathType: Prefix
        backend:
          service:
            name: web
            port:
              number: 80

  - host: api.example.com
    http:
      paths:
      - path: /v1
        pathType: Prefix
        backend:
          service:
            name: api
            port:
              number: 80

```

Apply it:

```bash
kubectl apply -f ingress.yaml

```

‚úÖ **Result**:

- `http://web.example.com` ‚Üí `web` Service
- `http://api.example.com/v1` ‚Üí `api` Service

> ‚ö†Ô∏è But wait! This won‚Äôt work yet ‚Äî you need an Ingress Controller (next topic).
> 

---

### ‚úÖ Summary YAML

```yaml
apiVersion: networking.k8s.io/v1
kind: Ingress
meta
  name: my-ingress
spec:
  rules:
  - host: myapp.com
    http:
      paths:
      - path: /
        pathType: Prefix
        backend:
          service:
            name: my-service
            port:
              number: 80

```

> üîë Key Fields:
> 
> - `host`: Domain name (optional ‚Äî can omit for catch-all)
> - `pathType`: `Prefix`, `Exact`, or `ImplementationSpecific`
> - `backend.service`: Where to route traffic

---

### ‚ùì Common Questions

**Q: Does Ingress work out-of-the-box in k3s?**

‚úÖ **Yes!** k3s includes **Traefik** as the default Ingress Controller.

**Q: Can I use Ingress for TCP/UDP (non-HTTP)?**

‚ùå No! Ingress is **HTTP/S only**.

‚úÖ Use **Service `type: LoadBalancer`** or **Ingress Controller extensions** (e.g., Traefik TCP routers).

**Q: What‚Äôs the difference between Ingress and Service `type: LoadBalancer`?**

‚û°Ô∏è **LoadBalancer**: One public IP per service

‚û°Ô∏è **Ingress**: One public IP for **many services** (L7 routing)

**Q: Do I need TLS for Ingress?**

‚ùå No ‚Äî but **always use it in production** (next topic).

---

### üõ†Ô∏è Best Practices

1. ‚úÖ **Use meaningful hostnames** (`web.prod.example.com`)
2. ‚úÖ **Prefer `pathType: Prefix`** over `Exact` for flexibility
3. ‚úÖ **Group related services** under one Ingress resource
4. ‚úÖ **Never expose Ingress without an Ingress Controller**
5. ‚úÖ **Test with `curl -H "Host: web.example.com" http://<INGRESS-IP>`**