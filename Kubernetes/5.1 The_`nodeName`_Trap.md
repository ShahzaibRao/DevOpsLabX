# 5.1 : Scheduling to a Specific Node (`nodeName`)

https://drive.google.com/file/d/1rt8QiHNs37SyGVv0Jddhjb-QY9P6gH6u/view?usp=sharing

### ğŸ” YAML Breakdown

```yaml
apiVersion: v1
kind: Pod
metadata: 
  name: nnappone
  namespace: learning
  labels:
    app: nnappone
spec:
  nodeName: nodeone.example.com   # â† HARD assignment to this node
  containers:
    - name: crackone-app
      image: nginx
      resources:
        requests:
          memory: "300Mi"
        limits:
          memory: "500Mi"

```

> ğŸ”‘ Key Field: spec.nodeName: nodeone.example.com
> 
> 
> â†’ **Bypasses the Kubernetes scheduler entirely!**
> 
> â†’ Pod is **forced** onto this node â€” no checks for resources, taints, or capacity.
> 

---

### ğŸ“Œ How `nodeName` Works

| Behavior | Explanation |
| --- | --- |
| **Scheduler Bypassed** | Normally, scheduler picks best node. Here, **you decide**. |
| **No Validation** | Kubernetes **wonâ€™t check** if node exists, has resources, or is ready. |
| **If node is down/unavailable** | Pod stays in **`Pending` forever** (no retry on other nodes). |
| **Use Case** | Rare! Only for **debugging**, **single-node clusters**, or **very special workloads**. |

> âš ï¸ Why Avoid in Production?
> 
> - Breaks **high availability**
> - Prevents **auto-scaling** and **rescheduling**
> - Fragile (node name changes = Pod breaks)

> âœ… Better Alternatives:
> 
> - `nodeSelector` (simple label-based)
> - `nodeAffinity` (flexible, expressive)
> - `podAntiAffinity` (for spreading workloads)

---

### ğŸ§ª Lab: Deploy Pod to Specific Node

> ğŸ’¡ Note: You likely donâ€™t have a node named nodeone.example.com â€” so this Pod will fail to schedule. Thatâ€™s expected! Weâ€™ll fix it.
> 

### ğŸ”§ Step 1: See What Nodes You Have

```bash
kubectl get nodes
# Example output:
# NAME           STATUS   ROLES           AGE   VERSION
# minikube       Ready    control-plane   10m   v1.28.0
# minikube-m02   Ready    <none>          10m   v1.28.0

```

> ğŸ“ Pick an actual node name (e.g., minikube).
> 

### ğŸ”§ Step 2: Edit YAML to Use Real Node Name

```yaml
# pod-for-specific-node.yml (updated)
spec:
  nodeName: minikube   # â† Replace with YOUR node name
  containers:
    - name: crackone-app
      image: nginx
      resources:
        requests:
          memory: "300Mi"
        limits:
          memory: "500Mi"

```

### ğŸ”§ Step 3: Run the Lab

```bash
# 1. Create namespace
kubectl create namespace learning

# 2. Apply Pod
kubectl apply -f pod-for-specific-node.yml

# 3. Check status
kubectl get pods -n learning -o wide

# âœ… Expected:
# NAME       READY   STATUS    NODE       ...
# nnappone   1/1     Running   minikube   ...

# 4. Verify itâ€™s on the right node
kubectl describe pod nnappone -n learning | grep "Node:"

# 5. Clean up
kubectl delete pod nnappone -n learning
kubectl delete namespace learning

```

---

### â“ What If Node Doesnâ€™t Exist?

If you keep `nodeName: nodeone.example.com` (fake name):

```bash
kubectl get pods -n learning
# NAME       READY   STATUS    RESTARTS   AGE
# nnappone   0/1     Pending   0          30s

kubectl describe pod nnappone -n learning
# Events:
#   Warning  FailedScheduling  5s  default-scheduler  0/2 nodes are available: 2 node(s) had taint {node.kubernetes.io/not-ready: }, that the pod didn't tolerate.
#   OR (if node unknown):
#   Warning  FailedScheduling  ...  node(s) had no available volume zone, node(s) were unschedulable

```

> ğŸ” Key Insight:
> 
> 
> Even with `nodeName`, if the node is **not ready** or **doesnâ€™t exist**, Pod stays **Pending**.
> 

---

### ğŸ†š Comparison: Scheduling Methods

| Method | Flexibility | Scheduler Used? | Production-Ready? |
| --- | --- | --- | --- |
| `nodeName` | âŒ None | âŒ No | âŒ Rarely |
| `nodeSelector` | âœ… Medium | âœ… Yes | âœ… Yes |
| `nodeAffinity` | âœ…âœ… High | âœ… Yes | âœ…âœ… Yes |
| `podAntiAffinity` | âœ…âœ… High | âœ… Yes | âœ…âœ… Critical for HA |

> ğŸ¯ Rule of Thumb:
> 
> 
> **Never use `nodeName` in production** unless you have a **very strong reason** (e.g., hardware-bound workload).
> 

---

### â¡ï¸ Summary

âœ… `nodeName` **forces** a Pod onto a specific node.

âš ï¸ **Bypasses scheduler** â†’ no resource/taint checks.

ğŸ” Use only for **debugging** or **learning**.

ğŸ› ï¸ In lab: **replace fake node name** with real one (`kubectl get nodes`).